\ProvidesPackage{unn-titlepage}
\RequirePackage{geometry}
\RequirePackage{etoolbox}
\newcommand*\ulfill{\mbox{}\leaders\hrule depth 2pt height -1.5pt\hfill} % similar to an underline
% Confirm text

\newcommand\Title@InstituteName{
    \MakeUppercase{
        МИНИСТЕРСТВО НАУКИ И ВЫСШЕГО ОБРАЗОВАНИЯ \\
        РОССИЙСКОЙ ФЕДЕРАЦИИ \\
    }
    \vspace{1em}
    Федеральное государственное автономное образовательное учреждение \\
    высшего образования \\
    <<Национальный исследовательский \\
    Нижегородский государственный университет им. Н.И. Лобачевского>>
}

\newcommand\TitleInstituteName[1]{\renewcommand\Title@InstituteName{#1}}

\newcommand*\Title@Department{%
    Радиофизический факультет
}
\newcommand*\TitleDepartment[1]{\renewcommand\Title@Department{#1}}       %%  To change confirm

\newcommand*\Title@Field{Радиофизика}
\newcommand*\TitleField[1]{\renewcommand\Title@Field{#1}}       %%  To change confirm

\newcommand*\Title@FieldNumber{%
03.04.03
}
\newcommand*\TitleFieldNumber[1]{\renewcommand\Title@FieldNumber{#1}}       %%  To change confirm

\newcommand*\Title@Specialization{Статистическая радиофизика}
\newcommand*\TitleSpecialization[1]{\renewcommand\Title@Specialization{#1}}       %%  To change confirm

\newcommand*\Title@WorkType{%
Реферат по специальной дисциплине
}
\newcommand*\TitleWorkType[1]{\renewcommand\Title@WorkType{#1}}       %%  To change confirm

\newcommand*\Title@WorkTitle{%
Название выпускной квалификационной работы
}
\newcommand*\TitleWorkTitle[1]{\renewcommand\Title@WorkTitle{#1}}       %%  To change confirm

\newcommand*\Title@Confirm{%
Выполнил:
}
\newcommand*\TitleConfirm[1]{\renewcommand\Title@Confirm{#1}}       %%  To change confirm

\newcommand*\Title@Boss{}
\newcommand*\TitleBoss[1]{\renewcommand\Title@Boss{#1}}       %%  To change confirm


\newcommand*\Title@Date{%
2022 год
}
\newcommand*\TitleDate[1]{\renewcommand\Title@Date{#1}}       %%  To change confirm

\newcommand*\Title@City{%
Нижний Новгород
}
\newcommand*\TitleCity[1]{\renewcommand\Title@City{#1}}       %%  To change confirm

\def\maketitle{\titlepage}

\newcounter{cnt}
\newcommand\addauthor[2]{%
  \stepcounter{cnt}%
  \csdef{post\thecnt}{#1}
  \csdef{author\thecnt}{#2}
}

\newcommand\getauthor[1]{%
  \csuse{post#1}
  \csuse{author#1}
}

\newcommand\setauthor[3]{%
  \csdef{post#1}{#2}
  \csdef{author#1}{#3}
}

\addauthor{}{Понур К.А.}



\renewenvironment*{titlepage}{
    \thispagestyle{empty}
    \newgeometry{left=30mm,right=15mm,top=15mm,bottom=15mm,bindingoffset=0cm,headheight=15pt}
    % \makebox[0pt][l]{%
    %     \raisebox{-\totalheight}[0pt][0pt]{%
    %     \hspace{-40mm}
    %     % \vspace{-40mm}
    %     \includegraphics{titlepage_2022}}
    % }%
    \begin{spacing}{1}
    \begin{center}
        \textbf{\Title@InstituteName} % name of Institute
    \end{center}

    \begin{center}
        \Title@Department
    \end{center}

     \vfill

    \begin{center}
        \textbf{\Title@WorkType} \\
        ~\Title@FieldNumber~<<\Title@Field>> \\
    \end{center}

    \begin{center}
        \MakeUppercase{\Title@WorkTitle}
    \end{center}
    \vspace{1em}

     \vfill

    \newcounter{i}
    \setcounter{i}{1}
    \begin{flushleft}
        \noindent
        \hfill 
        \parbox{0.31\linewidth}{\raggedright \Title@Confirm} 
        \vspace{1em} \\

        \loop
        \noindent 
        \parbox{0.64\linewidth}{\csuse{post\thei}}  \hfill 
        {\raggedright \makebox[0.1\linewidth]{\ulfill}}
        \parbox{0.20\linewidth}{\raggedright \csuse{author\thei}} 
        \vspace{2em} \\
        \ifnum \value{i}<\thecnt
        \addtocounter{i}{1}
        \repeat
    \end{flushleft}
    \vfill
    \begin{center}
        \Title@City\\
        \Title@Date
    \end{center}
    \end{spacing}
    
            % \noindent \csuse{post\thei} \hfill \centering \makebox[3em]{\ulfill} \raggedright \csuse{author\thei} \hfill \vspace{1em} \\



    
    % \addtocounter{cnt}{-1}

    % \noindent \gettext{\thei} \thei/\thecnt \newline
}{}